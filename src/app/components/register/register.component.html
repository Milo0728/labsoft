<div class="contenedor">
    <div *ngIf="!loading" class="body">
        <form [formGroup]="registerForm" (ngSubmit)="signup()" autocomplete="off">

            <img class="logo" src="./assets/img/login.png" alt="logo login">
            <h1>Registro</h1>

            <div class="mensajes"
                *ngIf="registerForm.get('email').invalid && (registerForm.get('email').dirty || registerForm.get('email').touched)">
                <small class="text-danger" *ngIf="registerForm.get('email').hasError('required')">
                    Este campo es requerido
                </small>



                <small class="text-danger" *ngIf="registerForm.get('email').hasError('pattern')">
                    No reconocemos ese formato de correo
                </small>

            </div>

            <div class="input-group mb-3">
                <span class="input-group-text bg-y border-0" id="basic-addon1">
                    <i [class.valid]="registerForm.get('email').valid && 
                    (registerForm.get('email').dirty || registerForm.get('email').touched)" [class.invalid]="registerForm.get('email').invalid && 
                       (registerForm.get('email').dirty || registerForm.get('email').touched)"
                        class="fa-sharp fa-solid fa-envelope"></i>
                </span>
                <input formControlName="email" type="email" class="form-control bg-x border-0 shadow-none"
                    placeholder="Email" required aria-describedby="basic-addon1" required>
            </div>



            <div class="mensajes"
                *ngIf="registerForm.get('password').invalid && (registerForm.get('password').dirty || registerForm.get('password').touched)">

                <small class="text-danger" *ngIf="registerForm.get('password').hasError('required')">
                    Este campo es requerido
                </small>

                <small class="text-danger" *ngIf="registerForm.get('password').hasError('minlength')">
                    Debes tener minimo 7 caracteres.
                </small>

                <small class="text-danger" *ngIf="registerForm.get('password').hasError('pattern')">
                    Debes tener al menos una letra, un número y un carácter especial
                </small>


            </div>

            <div class="input-group mb-3">
                <span class="input-group-text bg-y border-0" id="basic-addon1">
                    <i [class.valid]="registerForm.get('password').valid && 
                    (registerForm.get('password').dirty || registerForm.get('password').touched)" [class.invalid]="registerForm.get('password').invalid && 
                       (registerForm.get('password').dirty || registerForm.get('password').touched)"
                        class="fa-sharp fa-solid fa-lock"></i>
                </span>
                <input formControlName="password" type="password" class="form-control bg-x border-0 shadow-none"
                    placeholder="Contraseña" required aria-describedby="basic-addon1">
            </div>

            <div class="input-group mb-3">
                <span class="input-group-text bg-y border-0" id="basic-addon1">
                    <i [class.valid]="registerForm.get('repetirPassword').valid && 
                    (registerForm.get('repetirPassword').dirty || registerForm.get('repetirPassword').touched) && registerForm.get('repetirPassword').value == registerForm.get('password').value"
                        [class.invalid]="registerForm.get('repetirPassword').invalid && 
                       (registerForm.get('repetirPassword').dirty || registerForm.get('repetirPassword').touched) && (registerForm.get('repetirPassword').value !== registerForm.get('password').value)"
                        class="fa-sharp fa-solid fa-lock"></i>
                </span>
                <input formControlName="repetirPassword" type="password" class="form-control bg-x border-0 shadow-none"
                    placeholder="Repetir contraseña" required aria-describedby="basic-addon1">
            </div>
            <div id="passwordHelpBlock" class="form-text">La contraseña debe tener minimo 7 carácteres, una letra, un
                número y un carácter especial</div>


            <div class="mt-1 d-grid gap-2">
                <button [disabled]="registerForm.invalid" type="submit"
                    class="btn btn-primary btn-lg border-0">Registar</button>
            </div>

            <div class="mt-3">
                <a routerLink="/login">Volver</a>
            </div>
        </form>

    </div>
    <app-spinner *ngIf="loading"></app-spinner>

</div>